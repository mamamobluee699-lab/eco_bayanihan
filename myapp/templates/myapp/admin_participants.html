<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Manage Participants</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	<style>
		.card { border: 0; box-shadow: 0 10px 25px rgba(0,0,0,0.08); }
		.btn-animate { transition: transform .15s ease, box-shadow .15s ease; }
		.btn-animate:hover { transform: translateY(-2px); box-shadow: 0 .5rem 1rem rgba(0,0,0,.15); }
	</style>
</head>
<body>
    <div class="container py-4">
        {% include 'myapp/_messages.html' %}
        <div class="d-flex justify-content-between align-items-center mb-4">
			<h1 class="h3 m-0">Manage Participants</h1>
			<a class="btn btn-outline-secondary btn-animate" href="{% url 'myapp:admin_home' %}"><i class="bi bi-house me-1"></i> Admin Home</a>
		</div>

		<div class="row g-3 mb-4">
			<div class="col-lg-5">
				<div class="card p-3">
					<h2 class="h5">Add Participant</h2>
					<form method="post">
						{% csrf_token %}
						<input type="hidden" name="action" value="create" />
						<div class="mb-2">{{ form.name.label_tag }} {{ form.name }}</div>
						<div class="mb-2">{{ form.age.label_tag }} {{ form.age }}</div>
						<div class="mb-2">{{ form.zone.label_tag }} {{ form.zone }}</div>
						<div class="mb-2">{{ form.contact_number.label_tag }} {{ form.contact_number }}</div>
						<button class="btn btn-success btn-animate" type="submit"><i class="bi bi-plus-circle me-1"></i> Add</button>
					</form>
				</div>
			</div>
			<div class="col-lg-7">
				<div class="card p-3">
					<h2 class="h5">Participants</h2>
					<div class="table-responsive">
						<table class="table table-hover align-middle mb-0">
							<thead class="table-light">
								<tr>
									<th>Name</th>
									<th>Zone</th>
									<th>Contact</th>
									<th>Points</th>
									<th class="text-end">Actions</th>
								</tr>
							</thead>
							<tbody>
								{% for p in participants %}
									<tr>
										<td class="fw-semibold">{{ p.name }}</td>
										<td><span class="badge bg-primary">{{ p.zone }}</span></td>
										<td><span class="text-secondary">{{ p.contact_number }}</span></td>
										<td><span class="badge bg-success">{{ p.points }}</span></td>
										<td class="text-end">
											<form class="d-inline" method="post" style="margin-right:.25rem;">
												{% csrf_token %}
												<input type="hidden" name="action" value="award_points" />
												<input type="hidden" name="participant_id" value="{{ p.id }}" />
												<div class="input-group input-group-sm" style="width: 150px; display:inline-flex;">
													<input class="form-control" type="number" name="points" placeholder="Points" />
													<button class="btn btn-outline-success btn-animate" type="submit"><i class="bi bi-gift"></i></button>
												</div>
											</form>
											<form class="d-inline" method="post">
												{% csrf_token %}
												<input type="hidden" name="action" value="delete" />
												<input type="hidden" name="participant_id" value="{{ p.id }}" />
												<button class="btn btn-outline-danger btn-sm btn-animate" type="submit"><i class="bi bi-trash"></i></button>
											</form>
										</td>
									</tr>
								{% empty %}
									<tr><td colspan="5" class="text-center text-secondary">No participants yet.</td></tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
